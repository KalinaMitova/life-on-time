<div class="row">
    <div class="col-sm-10">
        <div class="content-header">IDEAS</div>
        <p class="content-sub-header">Here you can store, edit and convert into trackable goal every single idea you have.
        </p>
    </div>
    <div class="content-header col-sm-2" style="text-align: right;">
        <button type="button" class="btn btn-raised btn-outline-warning round btn-min-width mr-1 mb-1" data-toggle="modal" data-target="#newIdea" (click)="openModal('createEditIdeaModal', 'idea', 'create')">+
            New
            Idea</button>
    </div>
</div>

<div class="email-application">
    <div #contentOverlay class="content-overlay" (click)="onContentOverlay()"></div>
    <div class="email-app-content row">
        <div class="email-app-content-area w-100">
            <div class="email-app-list-mails p-0" (click)="onListItemClick()">
                <div [perfectScrollbar] class="email-app-list">
                    <div id="users-list">
                        <div class="list-group">
                            <div class="users-list-padding" *ngIf='ideas'>
                                <a [ngClass]=" idea.id==selectedIdeaId ?'list-group-item list-group-item-action bg-blue-grey bg-lighten-5 border-right-primary border-right-2': 'list-group-item list-group-item-action no-border'" *ngFor="let idea of ideas" (click)="DisplayIdea($event, idea)">
                                    <span class="media">

                                        <div class="media-body text-left">
                                            <p class="list-group-item-heading text-bold-500 ">
                                                {{ idea.name}}
                                                <span class="float-right">
                                                    <span class="font-small-2 primary">{{
                            idea.created_at}}</span>
                                    </span>
                                    </p>
                            </div>
                            </span>
                            </a>
                            <p class="primary text-center" *ngIf="ideas.length===0">There are no ideas!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- <ng-template #ideaContent>
   <app-idea-details [idea]="idea" [isIdeaSelected]="isIdeaSelected"></app-idea-details>
 </ng-template> -->

        <div class="email-app-mail-content" #ideaContent>
            <div class="email-app-mail-content-detail" *ngIf="idea &&isIdeaSelected">
                <div class="email-app-options card-body">
                    <div class="row d-md-none">
                        <button class="btn btn-raised btn-primary ml-2 back-to-inbox" (click)="allIdeas()">
                                <i class="fa fa-angle-left"></i> All Ideas</button>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-12 text-right">
                            <div class="btn-group" role="group" aria-label="Basic example">
                                <button type="button" class="btn btn-raised btn-outline-success mr-1" data-toggle="modal" data-target="#goal" alt="Convert Idea into Goal" title="Convert Idea into Goal" (click)="openModal('createEditModal', 'goal', 'create', idea)"><i
                                            class="ft-refresh-cw font-medium"></i></button>
                                <button type="button" class="btn btn-raised btn-outline-primary mr-1" data-toggle="modal" data-target="#goal" alt="Edit Idea" title="Edit Idea" (click)="openModal('createEditIdeaModal', 'idea', 'edit', idea)"><i
                                            class="ft-edit-2 font-medium"></i></button>
                                <button type="button" class="btn btn-raised btn-outline-danger mr-1" alt="Delete Idea" title="Delete Idea" (click)="openModal('confirmModal', 'idea', 'delete', idea)"><i
                                            class="ft-x font-medium"></i></button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="email-app-title card-body">
                    <h3 class="list-group-item-heading">{{idea.name}}</h3>
                    <p *ngIf="idea.info.content">{{idea.info.content}}</p>
                </div>

                <div class="media-list">
                    <!-- ------------------ Preview Images starts -------------------->
                    <div id="imagesCollapse" class="card-header p-0">
                        <a class="collapsed email-app-sender list-group-item list-group-item-action border-0" [attr.aria-expanded]="!isIdeaImagesCollapsed" aria-controls="images" (click)="isIdeaImagesCollapsed=!isIdeaImagesCollapsed">

                            <div class="media">
                                <div class="media-body">
                                    <h6 class="list-group-item-heading text-bold-500">Idea Images
                                        <span class="float-right">
                                                <i class="ft-chevron-down font-medium"></i>
                                            </span>
                                    </h6>
                                </div>
                            </div>

                        </a>
                    </div>
                    <div id="images" [ngbCollapse]="isIdeaImagesCollapsed">
                        <div class="card-content">
                            <button type="button" class="btn btn-raised btn-outline-primary mr-1" data-toggle="modal" data-target="#upload" title="Upload Images"><i
                                        class="ft-upload font-medium"
                                        (click)="open(uploadModal, 'images' )"></i></button>
                            <div class="email-app-text card-body">
                                <div class="email-app-message" *ngIf="idea.info?.images && idea.info.images.length>0">
                                    <figure *ngFor="let img of idea.info.images" class="col-md-4">
                                        <a [href]="img.path" data-size="1600x1067" target="_blank">
                                            <img alt="picture" [src]="img.path" class="img-fluid img-thumbnail">
                                        </a>
                                    </figure>
                                    <!-- <img *ngFor="let img of idea.info.images" [src]="img.path" alt="" class="img-thumbnail">
                                    <img src="https://placeimg.com/160/160/any" alt="" class="img-thumbnail">
                                    <img src="https://placeimg.com/160/160/any" alt="" class="rounded">
                                    <img src="https://placeimg.com/160/160/any" alt="">
                                    <img src="https://placeimg.com/160/160/any" alt="">
                                    <img src="https://placeimg.com/160/160/any" alt=""> -->

                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- ------------------ Preview Images ends -------------------->

                    <!-- ------------------ Preview Files starts -------------------->
                    <div id="filesCollapse" class="card-header p-0">
                        <a class="collapsed email-app-sender list-group-item list-group-item-action border-0" [attr.aria-expanded]="!isIdeaFilesCollapsed" aria-controls="files" (click)="isIdeaFilesCollapsed=!isIdeaFilesCollapsed">

                            <span class="media">
                                    <div class="media-body">
                                        <h6 class="list-group-item-heading text-bold-500">Idea Files
                                            <span class="float-right">
                                                <i class="ft-chevron-down font-medium"></i>
                                            </span>
                            </h6>
                    </div>
                    </span>
                    </a>
                </div>

                <div id="files" [ngbCollapse]="isIdeaFilesCollapsed">
                    <div class="card-content">
                        <button type="button" class="btn btn-raised btn-outline-primary mr-1" data-toggle="modal" data-target="#upload" (click)="open(uploadModal,'files')"><i
                                        class="ft-upload font-medium" title="Upload Files"></i></button>
                    </div>
                    <div class="card-body">
                        <div class="email-app-message" *ngIf="idea.info?.files &&idea.info.files.length > 0">
                            <div *ngFor="let file of idea.info.files">
                                <i class="fa fa-file-o" style="font-size:36px"></i>
                                <a *ngIf="file" [href]="file.path">{{file.name}}</a>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- ------------------ Preview Files ends -------------------->
            </div>
        </div>
    </div>
</div>
</div>
</div>

<ng-template #uploadModal let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 *ngIf="isImages" class="modal-title" id="modal-title">Upload your images</h4>
        <h4 *ngIf="!isImages" class="modal-title" id="modal-title">Upload your files</h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="card-content">
            <div class="email-app-text card-body" style="position: relative;">
                <div class="vertical-container" fxLayout="column" fxLayoutAlign="stretch" fxFlex="50%">
                    <div class="dropzone dropzone-container" [dropzone]="isImages?configImageDrop : configFileDrop" (init)="onUploadInit($event)" (error)="onUploadError($event)" (success)="onUploadSuccess($event, isImages)" (sending)="onSending($event)">
                        <div class="dz-message">Click or Drop images for upload here</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-raised" (click)="upload()">Upload</button>
    </div>
    <!-- </div> -->
</ng-template>